<?phpnamespace Admin\Controller;use Think\Controller;class UserController extends BaseController {	public  function index() {		$this->_getUser();		$this->display();	}		//获取用户	public function _getUser(){		$user_obj = M("user");		$user=$user_obj->order("user_registered desc")->select();		//print_r($user);		$this->assign ( "user", $user );	}	//添加用户	public function user_add(){		$page_title = "添加用户";		$this->assign ( "page_title", $page_title );		$this->display ( 'edit' );	}		//编辑用户个人信息	public function user_edit(){		$user_obj = M("user");		$usermeta_obj = M("usermeta");		$page_title = "修改用户信息";		$id = $_GET ['ID'];		$cwhere1 = "user_id=" . $id;		$usermeta=$usermeta_obj->where ( $cwhere1 )->select();		foreach ( $usermeta as $k => $v ) {			$user1[$v['meta_key']]=$v['meta_value'] ;		}		if($user1['pic']){			$user1['pic']="avatar2.jpg";		}		$cwhere2 = "ID=" . $id;		$user2=$user_obj->where ( $cwhere2 )->find();		//print_r($user2);		$this->assign ( "page_title", $page_title );		$this->assign ("user1", $user1);		//print_r($user1);		$this->assign ("user2", $user2);		$this->display ( 'edit' );	}	///编辑用户头像	public function user_pic(){			}	public function doedit(){		$user_obj = M("user");		$id = $_GET ['ID'];		if ($id) {			$cwhere = "ID=" . $id;			$result = $user_obj->where ( $cwhere )->save ( $user_obj->create () );		} else {			$data ['user_login'] = $_POST ['user_login'];			$data ['user_pass'] = $_POST ['user_pass'];			$data ['user_nicename'] = $_POST ['user_nicename'];			$data ['user_email'] = $_POST ['user_email'];			$data ['user_qq'] =$_POST ['user_qq'];			$data ['user_url'] =$_POST ['user_url'];			$data ['user_registered'] = date("Y-m-d H:i:s");			$data ['user_last_time'] = '';			$data ['user_sex'] =$_POST ['user_sex'];			$data ['user_status'] =$_POST ['user_status'];			$data ['user_ip'] = get_client_ip();			$result = $user_obj->add ( $user_obj->create ( $data ) );		}		if ($result > 0) {			$this->success ( "修改成功！",U ( "User/index") );		} else {			$this->error ( "修改失败！" );		}	}}