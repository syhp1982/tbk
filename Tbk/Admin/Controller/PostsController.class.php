<?phpnamespace Admin\Controller;use Think\Controller;class PostsController extends BaseController {	public  function index() {		// $this->_menu_list();		$posts_obj = M ( "posts" );		$cwhere = "1=1";		$posts = $posts_obj->where($cwhere)->order ( 'post_date' )->select ();		$this->assign ( "posts", $posts );		$this->display();	}		public function posts_add() {		$page_title = "添加文章";		$posts_obj = M ( "posts" );		$cwhere = "1=1";		$posts = $posts_obj->where ( $cwhere )->select ();		$nav_obj = M ( "menu" );		$cwhere2 = "cid=0";		$nav = $nav_obj->where ( $cwhere2 )->select ();		$this->assign ( "posts", $posts);		$this->assign ( "page_title", $page_title );		$this->assign ( "nav", $nav );		$this->display ( 'edit' );	}	public function posts_edit() {		$page_title = "修改文章";		$id = $_GET ['ID'];		$posts_obj = M ( "posts" );		$cwhere = "ID=".$id;		$posts = $posts_obj->where ( $cwhere )->find ();		$nav_obj = M ( "menu" );		$cwhere2 = "cid=0";		$nav = $nav_obj->where ( $cwhere2 )->select ();			$this->assign ( "page_title", $page_title );		$this->assign ( "posts", $posts );		$this->assign ( "nav", $nav );		$this->display ( 'edit' );	}	public function doedit() {		$posts_obj = M ( "posts" );		$data ['ID'] = $_GET ['ID'];		$data ['post_author'] = $_POST ['post_author'];		$data ['post_date'] = date("Y-m-d H:i:s");		if($data ['post_date']){			$data ['post_modified']= date("Y-m-d H:i:s");		}		$data ['post_info'] =$_POST ['post_info'];		$data ['post_content'] = $_POST ['post_content'];		$data ['post_title'] = $_POST ['post_title'];		$data ['post_type'] = $_POST ['post_type'];		$data ['post_status'] = $_POST ['post_status'];		$data ['post_parent'] = $_POST ['post_parent'];		$data ['guid'] = $_POST ['guid'];		$data ['comment_count'] = $_POST ['comment_count'];		if ($data ['ID']) {			$cwhere = "ID=" . $data ['ID'];			$result = $posts_obj->where ( $cwhere )->save ( $posts_obj->create ($data ) );		} else {			$result = $posts_obj->add ( $posts_obj->create ( $data ) );		}		if ($result > 0) {			$this->success ( "修改成功！",U ( "Posts/index") );		} else {			$this->error ( "修改失败！" );		}	}}